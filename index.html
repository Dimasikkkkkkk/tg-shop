<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>AskMouse | Shop</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #0d1117;
      color: #e6edf3;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #21262d;
    }

    h1 {
      font-size: 28px;
      font-weight: 700;
      color: #dc2626;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #8b949e;
      font-size: 14px;
    }

    .categories {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .category-btn {
      padding: 10px 20px;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      color: #e6edf3;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .category-btn:hover {
      background: #21262d;
      border-color: #dc2626;
    }

    .category-btn.active {
      background: #dc2626;
      border-color: #dc2626;
      color: white;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .product-card {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }

    .product-card:hover {
      border-color: #dc2626;
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(220, 38, 38, 0.2);
    }

    .product-image {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: #0d1117;
      border-radius: 8px;
      margin-bottom: 15px;
      padding: 10px;
    }

    .product-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #e6edf3;
      flex-grow: 1;
    }

    .product-price {
      font-size: 20px;
      font-weight: 700;
      color: #dc2626;
      margin-top: auto;
    }

    .cart-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: #dc2626;
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
      transition: all 0.3s;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cart-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(220, 38, 38, 0.6);
    }

    .cart-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: white;
      color: #dc2626;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      overflow-y: auto;
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-content {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 16px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #30363d;
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: #dc2626;
    }

    .close-btn {
      background: none;
      border: none;
      color: #8b949e;
      font-size: 28px;
      cursor: pointer;
      line-height: 1;
    }

    .close-btn:hover {
      color: #e6edf3;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid #21262d;
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-item-info {
      flex-grow: 1;
    }

    .cart-item-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .cart-item-price {
      color: #dc2626;
      font-size: 14px;
    }

    .remove-btn {
      background: #dc2626;
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
    }

    .total {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid #30363d;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 20px;
      font-weight: 700;
    }

    .total-price {
      color: #dc2626;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #e6edf3;
      font-weight: 500;
    }

    input, textarea, select {
      width: 100%;
      padding: 12px;
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      color: #e6edf3;
      font-size: 14px;
      font-family: inherit;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #dc2626;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    .submit-btn {
      width: 100%;
      padding: 14px;
      background: #dc2626;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 10px;
    }

    .submit-btn:hover {
      background: #b91c1c;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
    }

    .empty-cart {
      text-align: center;
      padding: 40px 20px;
      color: #8b949e;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>AskMouse | Shop</h1>
      <p class="subtitle">–ú–∞–≥–∞–∑–∏–Ω –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏—Ö –¥–ª—è –ü–ö</p>
    </header>

    <div class="categories">
      <button class="category-btn active" data-category="all">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
      <button class="category-btn" data-category="–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä">–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</button>
      <button class="category-btn" data-category="–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞">–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞</button>
      <button class="category-btn" data-category="–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞">–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞</button>
      <button class="category-btn" data-category="–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å">–û–ó–£</button>
      <button class="category-btn" data-category="SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏">SSD</button>
      <button class="category-btn" data-category="–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è">–ë–ü</button>
      <button class="category-btn" data-category="–ö—É–ª–µ—Ä">–ö—É–ª–µ—Ä</button>
    </div>

    <div class="products-grid" id="productsGrid"></div>
  </div>

  <button class="cart-btn" id="cartBtn">
    üõí
    <span class="cart-badge hidden" id="cartBadge">0</span>
  </button>

  <div class="modal" id="cartModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">–ö–æ—Ä–∑–∏–Ω–∞</h2>
        <button class="close-btn" id="closeCart">&times;</button>
      </div>
      <div id="cartItems"></div>
      <div id="cartTotal" class="total hidden">
        <span>–ò—Ç–æ–≥–æ:</span>
        <span class="total-price" id="totalPrice">0 ‚ÇΩ</span>
      </div>
      <button class="submit-btn hidden" id="checkoutBtn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
  </div>

  <div class="modal" id="orderModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <button class="close-btn" id="closeOrder">&times;</button>
      </div>
      <form id="orderForm">
        <div class="form-group">
          <label>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è *</label>
          <select id="deliveryType" required style="width: 100%; padding: 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 8px; color: #e6edf3; font-size: 14px; font-family: inherit;">
            <option value="delivery">–î–æ—Å—Ç–∞–≤–∫–∞</option>
            <option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
          </select>
        </div>
        <div class="form-group" id="addressGroup">
          <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
          <textarea id="address" required placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"></textarea>
        </div>
        <div class="form-group">
          <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <textarea id="comment" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
        </div>
        <button type="submit" class="submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </form>
    </div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    function getImageUrl(path) {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º raw.githubusercontent.com –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
      const baseUrl = 'https://raw.githubusercontent.com/Dimasikkkkkkk/tg-shop/main/';
      // –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–¥–∏—Ä—É–µ–º –ø—É—Ç—å, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–ª–µ—à–∏
      const parts = path.split('/');
      const encodedParts = parts.map(part => encodeURIComponent(part));
      return baseUrl + encodedParts.join('/');
    }

    // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
    const products = [
      // –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
      { id: 1, name: 'AMD Ryzen 5 7600', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 18990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/AMD Ryzen 5 7600/16958077016898.png' },
      { id: 2, name: 'AMD Ryzen 7 7700', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 24990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/AMD Ryzen 7 7700/2025-02-1411.56.31.png' },
      { id: 3, name: 'AMD Ryzen 7 7800X3D', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 32990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/AMD Ryzen 7 7800X3D/q90_916402_829c41ef7182a0de28dd0e9c7.png' },
      { id: 4, name: 'AMD Ryzen 9 9950X3D', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 59990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/AMD Ryzen 9 9950X3D/XQtChXT5tWwifq0T9euX3w.png' },
      { id: 5, name: 'Intel Core i3-12100F', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 8990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/Intel Core i3-12100F/scale_1200.png' },
      { id: 6, name: 'Intel Core i5-12400', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 14990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/Intel Core i5-12400/H4280bc21d8a743929fa2066a4fcb5e24J.png_720x720q50.png' },
      { id: 7, name: 'Intel Core i7-12700', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 24990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/Intel Core i7-12700/1656044984392.png' },
      { id: 8, name: 'Intel Core i9-14900KS', category: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', price: 59990, image: '–ë–æ—Ç/–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä/Intel Core i9-14900KS/8fce7b73b922f889247d9617111d4083.png' },
      
      // –í–∏–¥–µ–æ–∫–∞—Ä—Ç—ã
      { id: 9, name: 'RTX 3060', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 29990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 3060/0366707_5-500x400.png' },
      { id: 10, name: 'RTX 4060', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 34990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 4060/orig.png' },
      { id: 11, name: 'RTX 4070', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 54990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 4070/162514_2.png' },
      { id: 12, name: 'RTX 4080', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 89990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 4080/s-l960.png' },
      { id: 13, name: 'RTX 4090', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 149990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 4090/5971787.png' },
      { id: 14, name: 'RTX 5060', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 39990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 5060/97300.970.png' },
      { id: 15, name: 'RTX 5070', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 59990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 5070/94760.970.png' },
      { id: 16, name: 'RTX 5080', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 99990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 5080/orig.png' },
      { id: 17, name: 'RTX 5090', category: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', price: 179990, image: '–ë–æ—Ç/–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞/RTX 5090/61e8524106a64cc68daf06d004cf653a.png' },
      
      // –ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∏–µ –ø–ª–∞—Ç—ã
      { id: 18, name: 'ASRock Phantom Gaming X870E NOVA WIFI', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 34990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/ASRock Phantom Gaming X870E NOVA WIFI/9028595cae77ea70c7c0b90a04e37dce.png' },
      { id: 19, name: 'ASUS ROG CROSSHAIR X870E HERO', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 49990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/ASUS ROG CROSSHAIR X870E HERO/immersion-m.png' },
      { id: 20, name: 'ASUS ROG STRIX B550-F GAMING', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 19990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/ASUS ROG STRIX B550-F GAMING/c145db7ff5734fd6e1a68fe73b4fbdac.png' },
      { id: 21, name: 'GIGABYTE B550 AORUS ELITE V2', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 14990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/GIGABYTE B550 AORUS ELITE V2/45645565.PNG.1d9879959fc7f46dc565a3d33d590db9.png' },
      { id: 22, name: 'GIGABYTE Z790 AORUS ELITE AX', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 29990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/GIGABYTE Z790 AORUS ELITE AX/diagram.png' },
      { id: 23, name: 'GIGABYTE Z890 Gaming X WIFI7', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 34990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/GIGABYTE Z890 Gaming X WIFI7/566986.970x0.png' },
      { id: 24, name: 'MSI B650 GAMING PLUS WIFI', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 19990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/MSI B650 GAMING PLUS WIFI/orig.png' },
      { id: 25, name: 'MSI B850 GAMING PLUS WIFI', category: '–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞', price: 24990, image: '–ë–æ—Ç/–ú–∞—Ç–µ—Ä–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç–∞/MSI B850 GAMING PLUS WIFI/cooling-overview-xs.png' },
      
      // –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å
      { id: 26, name: 'ADATA XPG Lancer Blade 32GB DDR5', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 8990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/ADATA XPG Lancer Blade 32GB DDR5/orig (1).png' },
      { id: 27, name: 'ADATA XPG Lancer Blade 64GB DDR5', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 14990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/ADATA XPG Lancer Blade 64GB DDR5/orig.png' },
      { id: 28, name: 'ADATA XPG SPECTRIX D35G RGB 16GB DDR4', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 4990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/ADATA XPG SPECTRIX D35G RGB 16GB DDR4/orig.png' },
      { id: 29, name: 'G.Skill Aegis 16GB DDR4', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 3990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/G.Skill Aegis 16GB DDR4/1232524.png' },
      { id: 30, name: 'G.Skill Aegis 32GB DDR4', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 6990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/G.Skill Aegis 32GB DDR4/1232524 (1).png' },
      { id: 31, name: 'G.Skill Trident Z5 RGB 32GB DDR5', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 10990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/G.Skill Trident Z5 RGB 32GB DDR5/file-1-102.png' },
      { id: 32, name: 'Kingston FURY Beast Black 32GB DDR5', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 9990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/Kingston FURY Beast Black 32GB DDR5/12cd4f28-bba7-4cd0-9712-6ff557ce5b18.png' },
      { id: 33, name: 'Kingston FURY Beast Black 64GB DDR5', category: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', price: 17990, image: '–ë–æ—Ç/–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å/Kingston FURY Beast Black 64GB DDR5/12cd4f28-bba7-4cd0-9712-6ff557ce5b18 (1).png' },
      
      // SSD
      { id: 34, name: 'M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å ARDOR GAMING Ally 512GB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 3990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å ARDOR GAMING Ally 512GB/42048_photo.png' },
      { id: 35, name: 'M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Kingston NV2 500GB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 3490, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Kingston NV2 500GB/Untitled-design-2023-03-20T094734.221-1-860x860.png' },
      { id: 36, name: 'M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 980 256GB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 2990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 980 256GB/orig.png' },
      { id: 37, name: 'M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 980 PRO 2TB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 14990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/M.2 –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 980 PRO 2TB/vnutrenniy-ssd-nakopitel-samsung-980-pro-pcie-4-0-nvme-m-2-ssd-2tb-1721799033379.png' },
      { id: 38, name: 'SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Apacer AS350 PANTHER 1TB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 4990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Apacer AS350 PANTHER 1TB/orig.png' },
      { id: 39, name: 'SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Kingston A400 960GB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 4490, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Kingston A400 960GB/1557730944_1.png' },
      { id: 40, name: 'SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 870 EVO 1TB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 6990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 870 EVO 1TB/orig (1).png' },
      { id: 41, name: 'SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 870 EVO 2TB', category: 'SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏', price: 12990, image: '–ë–æ—Ç/SSD –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏/SATA –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å Samsung 870 EVO 2TB/orig.png' },
      
      // –ë–ª–æ–∫–∏ –ø–∏—Ç–∞–Ω–∏—è
      { id: 42, name: 'Cougar GX 1050W', category: '–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è', price: 12990, image: '–ë–æ—Ç/–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è/Cougar GX 1050W/792817.png' },
      { id: 43, name: 'DEEPCOOL GamerStorm PN1000M', category: '–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è', price: 14990, image: '–ë–æ—Ç/–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è/DEEPCOOL GamerStorm PN1000M/orig.png' },
      { id: 44, name: 'DEEPCOOL GamerStorm PN850M', category: '–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è', price: 10990, image: '–ë–æ—Ç/–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è/DEEPCOOL GamerStorm PN850M/orig (1).png' },
      { id: 45, name: 'Montech CENTURY II', category: '–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è', price: 8990, image: '–ë–æ—Ç/–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è/Montech CENTURY II/img_rd304701_003.png' },
      { id: 46, name: 'MSI MPG A1000G PCIE5', category: '–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è', price: 16990, image: '–ë–æ—Ç/–ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è/MSI MPG A1000G PCIE5/A1000G-5-400x400.png' },
      
      // –ö—É–ª–µ—Ä—ã
      { id: 47, name: 'DEEPCOOL AG620', category: '–ö—É–ª–µ—Ä', price: 3990, image: '–ë–æ—Ç/–ö—É–ª–µ—Ä/DEEPCOOL AG620/1546c336-e136-4eec-bb5a-0bff9caf0340-1200x600.png' },
      { id: 48, name: 'DEEPCOOL AK620', category: '–ö—É–ª–µ—Ä', price: 4990, image: '–ë–æ—Ç/–ö—É–ª–µ—Ä/DEEPCOOL AK620/DEEPCOOL-AK620-ZERO-DARK.png' },
      { id: 49, name: 'DEEPCOOL AK620 DIGITAL PRO', category: '–ö—É–ª–µ—Ä', price: 6990, image: '–ë–æ—Ç/–ö—É–ª–µ—Ä/DEEPCOOL AK620 DIGITAL PRO/f5b41d805393f5d456e4f02c11f58b15.png' },
      { id: 50, name: 'ID-COOLING SE-206-XT', category: '–ö—É–ª–µ—Ä', price: 3490, image: '–ë–æ—Ç/–ö—É–ª–µ—Ä/ID-COOLING SE-206-XT/kuler-id-cooling-se-206-xt-1024x889.png' }
    ];

    let cart = [];
    let currentCategory = 'all';

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    function init() {
      renderProducts();
      setupEventListeners();
      updateCartUI();
    }

    // –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const filtered = currentCategory === 'all' 
        ? products 
        : products.filter(p => p.category === currentCategory);
      
      grid.innerHTML = filtered.map(product => `
        <div class="product-card" onclick="addToCart(${product.id})">
          <img src="${getImageUrl(product.image)}" alt="${product.name}" class="product-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23161b22%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%238b949e%22 font-family=%22sans-serif%22 font-size=%2214%22 dy=%2210.5%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3E–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è%3C/text%3E%3C/svg%3E'">
          <div class="product-name">${product.name}</div>
          <div class="product-price">${product.price.toLocaleString()} ‚ÇΩ</div>
        </div>
      `).join('');
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      cart.push({ ...product, cartId: crypto.randomUUID() });
      updateCartUI();
      tg.HapticFeedback.impactOccurred('light');
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
    function removeFromCart(cartId) {
      cart = cart.filter(item => item.cartId !== cartId);
      updateCartUI();
      renderCartItems();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∫–æ—Ä–∑–∏–Ω—ã
    function updateCartUI() {
      const badge = document.getElementById('cartBadge');
      if (cart.length > 0) {
        badge.textContent = cart.length;
        badge.classList.remove('hidden');
      } else {
        badge.classList.add('hidden');
      }
    }

    // –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    function renderCartItems() {
      const container = document.getElementById('cartItems');
      const totalEl = document.getElementById('cartTotal');
      const checkoutBtn = document.getElementById('checkoutBtn');
      
      if (cart.length === 0) {
        container.innerHTML = '<div class="empty-cart">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>';
        totalEl.classList.add('hidden');
        checkoutBtn.classList.add('hidden');
        return;
      }

      totalEl.classList.remove('hidden');
      checkoutBtn.classList.remove('hidden');
      
      const total = cart.reduce((sum, item) => sum + item.price, 0);
      document.getElementById('totalPrice').textContent = `${total.toLocaleString()} ‚ÇΩ`;

      container.innerHTML = cart.map(item => `
        <div class="cart-item">
          <div class="cart-item-info">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-price">${item.price.toLocaleString()} ‚ÇΩ</div>
          </div>
          <button class="remove-btn" onclick="removeFromCart('${item.cartId}')">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      `).join('');
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    function setupEventListeners() {
      // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentCategory = btn.dataset.category;
          renderProducts();
        });
      });

      // –ö–æ—Ä–∑–∏–Ω–∞
      document.getElementById('cartBtn').addEventListener('click', () => {
        renderCartItems();
        document.getElementById('cartModal').classList.add('active');
      });

      document.getElementById('closeCart').addEventListener('click', () => {
        document.getElementById('cartModal').classList.remove('active');
      });

      document.getElementById('checkoutBtn').addEventListener('click', () => {
        document.getElementById('cartModal').classList.remove('active');
        document.getElementById('orderModal').classList.add('active');
      });

      document.getElementById('closeOrder').addEventListener('click', () => {
        document.getElementById('orderModal').classList.remove('active');
      });

      // –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞
      document.getElementById('orderForm').addEventListener('submit', (e) => {
        e.preventDefault();
        submitOrder();
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
      document.getElementById('deliveryType').addEventListener('change', (e) => {
        const addressGroup = document.getElementById('addressGroup');
        const addressField = document.getElementById('address');
        if (e.target.value === 'pickup') {
          addressGroup.style.display = 'none';
          addressField.removeAttribute('required');
        } else {
          addressGroup.style.display = 'block';
          addressField.setAttribute('required', 'required');
        }
      });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ
      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.remove('active');
          }
        });
      });
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
    function submitOrder() {
      const deliveryType = document.getElementById('deliveryType').value;
      const address = document.getElementById('address').value;
      const comment = document.getElementById('comment').value;
      // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram WebApp
      const user = tg.initDataUnsafe?.user || {};
      
      // –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
      console.log('User data from Telegram:', user);

      const order = {
        items: cart.map(item => ({
          name: item.name,
          price: item.price
        })),
        total: cart.reduce((sum, item) => sum + item.price, 0),
        deliveryType: deliveryType,
        address: deliveryType === 'delivery' ? address : '–°–∞–º–æ–≤—ã–≤–æ–∑',
        comment: comment || '',
        userId: user?.id || null,
        username: user?.username || null,
        firstName: user?.first_name || null,
        lastName: user?.last_name || null
      };

      tg.sendData(JSON.stringify(order));
      tg.close();
    }

    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è onclick
    window.addToCart = addToCart;
    window.removeFromCart = removeFromCart;

    init();
  </script>
</body>
</html>
